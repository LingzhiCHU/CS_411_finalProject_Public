function createMarketingCookie(e,t,i,a,r){var n=e+"="+t+";";i&&(i instanceof Date?isNaN(i.getTime())&&(i=new Date):i=new Date((new Date).getTime()+1e3*parseInt(i)*60*60*24),n+="expires="+i.toGMTString()+";"),a&&(n+="path="+a+";"),r&&(n+="domain="+r+";"),document.cookie=n}function getMarketingCookie_unreliable(e){var t=new RegExp("(?:^"+e+"|;\\s*"+e+")=(.*?)(?:;|$)","g"),i=t.exec(document.cookie);return null===i?null:i[1]}function deleteMarketingCookie(e,t,i){createMarketingCookie(e,"",-1,t,i)}function setMarketingEAPID(e){var t=function(i,a){if(getMarketingCookie_unreliable("iEAPID")!=i){var r=getMarketingDomain();deleteMarketingCookie("iEAPID","/",r),createMarketingCookie("iEAPID",i,null,"/",r),a<5&&setTimeout(function(){t(e,a++)},1500)}};"undefined"!=typeof jQuery?jQuery(document).ready(function(){t(e,0)}):t(e,0)}function getMarketingDomain(){var e=location.href.match(/:\/\/(www\.)?([^\/:]+)/);return e>""&&(e=e[2]?e[2]:"",e="."+e),e}function logoutMarketingUser(){var e=getMarketingDomain();deleteMarketingCookie("linfo","/",e),deleteMarketingCookie("user","/",e),deleteMarketingCookie("minfo","/",e),deleteMarketingCookie("accttype","/",e),deleteMarketingCookie("iEAPID","/",e)}function buildTaapMdpcidValue(e,t,i){var a="WPK."+e+"."+t+"-"+i;return a}function buildDateYYYYMMDD(e){var t=new Date((new Date).setTime((new Date).getTime()+24*e*60*60*1e3)),i=t.getFullYear().toString(),a=(t.getMonth()+1).toString();a.length<2&&(a="0"+a);var r=t.getDate().toString();return r.length<2&&(r="0"+r),i+a+r}function setMarketingCidInASPP(e,t){var i=buildDateYYYYMMDD(30),a="v.1,0|"+t+"|||||||||"+e+"|"+i+"|";createMarketingCookie("aspp",a,null,"/",getMarketingDomain())}function tracking_array_contains(e,t){for(var i=e.length;i--;)if(e[i]===t)return!0;return!1}function ClearMediaCookieIfItIsTickSeparated(){var e="p1=",t=document.cookie.indexOf(e);if(t==-1){var i="MediaCookie=",a=document.cookie.indexOf(i);if(a>=0){var r=a+i.length+1,n=document.cookie.indexOf(";",r);n==-1&&(n=document.cookie.length);var s=r+1;if(s<n){var o=document.cookie.substring(r,s);if("`"==o){var l=new Date((new Date).setTime((new Date).getTime())),c=getDomainLegacy(location.href);c>""&&(c=c[2]?c[2]:"",document.cookie=i+"; expires="+l.toUTCString()+"; domain=."+c+"; path=/")}}}}}function GetChannelSpecificCode(e,t){var i=/(?:cuid|tduid)=([^&]*)/i,a=t;return i.test(location.search)&&(a=i.exec(location.search)[1]),a}function getChannelSpecificConversionID(e){var t=/(?:mdpdtl|oladtl|afflid|icmdtl)=([^&]*)/i,i="";return i=t.test(location.search)?t.exec(location.search)[1]:e}function IsLockedCode(e,t,i,a){return t&&""!=t&&"wpk"==t.slice(0,3)&&"wpk"!=a.slice(0,3)}function GetASPPersistentCookie(){var e=document.cookie.indexOf("aspp="),t=e+5;if(!e&&"aspp"!=document.cookie.substring(0,4))return null;if(e==-1)return null;var i=document.cookie.indexOf(";",t);return i==-1&&(i=document.cookie.length),document.cookie.substring(t,i)}function SetASPPersistentCookie(e){ExpireASPPCookieInParentDomain();var t=new Date((new Date).setTime((new Date).getTime()+15768e7)),i=getDomainLegacy(location.href);i>""?(i=i[2]?i[2]:"",document.cookie="aspp="+e+"; expires="+t.toUTCString()+"; domain=."+i+"; path=/"):document.cookie="aspp="+e+"; expires="+t.toUTCString()+"; path=/",null!=i&&""!=i||("undefined"!=typeof dctk?dctk.loggingAdapter.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]):"undefined"!=typeof expClientLogging&&expClientLogging.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]))}function getCookie(e){var t=RegExp("(?:^| |;)"+e+"=([^ ;]*)","i"),i=t.exec(document.cookie);return null==i||i.length<=1?null:i[1]}function setAspCookie(e,t){if(null!=t&&null!=e){var i=t?"aspp":"asps",a=getDomain(location.href),r=t?new Date((new Date).setTime((new Date).getTime()+15768e7)):null,n="/";t&&ExpireASPPCookieInParentDomain();var s=i+"="+e+"; ";null!=r&&(s+="expires="+r.toUTCString()+"; "),a>""&&"localhost"!=a&&(s+="domain=."+a+"; "),s+="path="+n,document.cookie=s,null!=a&&""!=a||("undefined"!=typeof dctk?dctk.loggingAdapter.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]):"undefined"!=typeof expClientLogging&&expClientLogging.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]))}}function ExpireASPPCookieInParentDomain(){var e=new Date((new Date).setTime((new Date).getTime()-15768e7)),t=getDomainLegacy(location.href);t=t[2]?t[2]:"",t>""&&(document.cookie="aspp=; expires="+e.toUTCString()+"; path=/")}function GetCookieValue(e,t,i){null==i&&(i=","),e+="=";var a=document.cookie.indexOf(e),r=a+e.length;if(!a&&e!=document.cookie.substring(0,e.length))return"";if(a==-1)return"";var n=document.cookie.indexOf(";",r);n==-1&&(n=document.cookie.length);var s=document.cookie.substring(r,n),o=s.split(i);return null!=o[t]?o[t]:null}function GetP1CookieTpid(){var e="p1=",t=document.cookie.indexOf(e),i=t+e.length;if(t==-1)return GetCookieValue("tpid",1);var a=document.cookie.indexOf(";",i);a==-1&&(a=document.cookie.length);for(var r=document.cookie.substring(i,a).split("`"),n=0;n<r.length;n++)if(r[n].indexOf("tpid")!=-1)return r[n].split(",")[1]}function isValidASPPCookie(e){var t=/v\..*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*/i,i=t.exec(e);return!!i}function captureZanpid(e){var t=getZanpids(e),i=getCookie("asps");if(!(t.length<1)){if(!isValidAspsCookie(i))return i="0||||||0|"+t.toString(),void setAspCookie(i,!1);var a=i.split("|");a[7]=t.toString(),i="";for(var r=0;r<a.length;r++)i+=a[r]+"|";setAspCookie(i.substring(0,i.length-1),!1)}}function getZanpids(e){for(var t,i=/zanpid=([^&]*)/gi,a=[];t=i.exec(e);)t.length>1&&""!=t[1]&&a.push(t[1]);return a}function isValidAspsCookie(e){var t=/.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*/i;return null!=e&&e>""&&t.test(e)}function getDomainLegacy(e){var t=e.match(/:\/\/(www\.)?([^\/:]+)/);return t}function getDomain(e){var t=null!=e?e.match(/:\/\/(?:www\.)?([^\/:]+)/):"";return null==t||t.length<=1?"":t[1]}function checkIfEmailInString(e){var t=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/;return t.test(e)}function getValueOfCookie(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var r=i[a];" "==r.charAt(0);)r=r.substring(1);if(r=r.replace(" ",""),r.indexOf(t)!=-1)return r.substring(t.length,r.length)}return""}function deleteCookie(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1);a=a.replace(" ","");for(var r=0;r<e.length;r++)if(a.indexOf(e[r])!=-1&&a.length>300){var n=new Date((new Date).setTime((new Date).getTime()-15768e7)),s=getDomainLegacy(location.href);return s=s[2]?s[2]:"",void(s>""?document.cookie=a.split("=")[0]+"= ;expires="+n.toUTCString()+"; domain=."+s+"; path=/":document.cookie=a.split("=")[0]+"= ;expires="+n.toUTCString()+"; path=/")}}}!function(e,t){"use strict";var i=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var i=function(e,t,a){return 1===arguments.length?i.get(e):i.set(e,t,a)};return i._document=e.document,i._cacheKeyPrefix="cookey.",i._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),i.defaults={path:"/",secure:!1},i.get=function(e){i._cachedDocumentCookie!==i._document.cookie&&i._renewCache();var a=i._cache[i._cacheKeyPrefix+e];return a===t?t:decodeURIComponent(a)},i.set=function(e,a,r){return r=i._getExtendedOptions(r),r.expires=i._getExpiresDate(a===t?-1:r.expires),i._document.cookie=i._generateCookieString(e,a,r),i},i.expire=function(e,a){return i.set(e,t,a)},i._getExtendedOptions=function(e){return{path:e&&e.path||i.defaults.path,domain:e&&e.domain||i.defaults.domain,expires:e&&e.expires||i.defaults.expires,secure:e&&e.secure!==t?e.secure:i.defaults.secure}},i._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},i._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?i._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!i._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},i._generateCookieString=function(e,t,i){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),i=i||{};var a=e+"="+t;return a+=i.path?";path="+i.path:"",a+=i.domain?";domain="+i.domain:"",a+=i.expires?";expires="+i.expires.toUTCString():"",a+=i.secure?";secure":""},i._getCacheFromString=function(e){for(var a={},r=e?e.split("; "):[],n=0;n<r.length;n++){var s=i._getKeyValuePairFromCookieString(r[n]);a[i._cacheKeyPrefix+s.key]===t&&(a[i._cacheKeyPrefix+s.key]=s.value)}return a},i._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var i,a=e.substr(0,t);try{i=decodeURIComponent(a)}catch(r){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+a+'"',r)}return{key:i,value:e.substr(t+1)}},i._renewCache=function(){i._cache=i._getCacheFromString(i._document.cookie),i._cachedDocumentCookie=i._document.cookie},i._areEnabled=function(){var e="cookies.js",t="1"===i.set(e,1).get(e);return i.expire(e),t},i.enabled=i._areEnabled(),i},a="object"==typeof e.document?i(e):i;"function"==typeof define&&define.amd?define("cookies",function(){return a}):"object"==typeof exports?("object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=a),exports.Cookies=a):e.Cookies=a}("undefined"==typeof window?this:window),define("gc/abTestRegistry",["gc/abTestRegistryOverride","gc/errorLogging"],function(e,t){"use strict";function i(e,t){for(var i={},a=e.length-1;a>=0;--a)i[e[a]]=e[a];for(var a=t.length-1;a>=0;--a)i[t[a]]=t[a];var r=[];for(var n in i)i.hasOwnProperty(n)&&r.push(i[n]);return r}try{var a=[3291,5435,6070,6260,6555,6655,7808,6696,6739,8071,8263,8445,8664,8773,8774,8812,9027,9109,9110,9241,9433,8160,9598,10614,10728,10967,10933,11054,11582,11680,11683,9326,10340,10339,10901,11237,10921,11776,10341,10406,10120,11046,11100,11394,11138,11841,11842,11872,11636,11903,11877,11873,12234,12609,10188,12087,12963,12977,12978,11946,12233,13056,13119,12855,13431,12571,13502,13429,13430];return a=i(a,e)}catch(r){t.logError(r,"wizard","gc/abTestRegistryOverride","main")}}),define("gc/abTest",["jquery","gc/pageModel","cookies","gc/errorLogging","env"],function(e,t,i,a,r){function n(e){if("local"===r.version&&e.message&&e.message.type&&"undefined"!==console){var t=e.message.type;(t.indexOf("WARN")>-1||t.indexOf("ERROR")>-1)&&console.log("abTests error: ["+e.message.id+"] "+e.message.description)}}function s(e,t){return c+e+"?guid="+d.guid+"&tpid="+u+"&eapid="+p+"&id="+t}var o="/api/bucketing/v1/evaluateExperiments/",l="/api/bucketing/v1/evaluateExperimentsAndLog/",c="//"+window.location.host,d=t.user,u=t.site.tpid,p=t.site.eapid,h={};e.each(t.abTests,function(e,t){h[t.id]=t});var g={_abTestMap:h,_loggedTests:[],get:function(t,i,r){try{var l={id:t,value:0};if(!d.guid||!u||!t)return l;"string"==typeof t&&(t=parseInt(t));var c=!1;if(this._abTestMap[t]&&(l=this._abTestMap[t],c=!0),r)this.log(t,i);else if(c)"function"==typeof i&&i(l);else{var p=s(o,t);e.getJSON(p).then(function(e){n(e),e.evaluatedExperiments&&e.evaluatedExperiments.length>0&&(l=e.evaluatedExperiments[0],g._abTestMap[l.id]||(g._abTestMap[l.id]=l)),"function"==typeof i&&i(l)},n)}return l}catch(h){a.logError(h,"header","gc/abTest","get")}},log:function(t,i){var a=this;if(d.guid&&u&&t){"string"==typeof t&&(t=parseInt(t));var r={id:t,value:0},o=s(l,t);e.getJSON(o).then(function(e){if(n(e),e.evaluatedExperiments&&e.evaluatedExperiments.length>0&&(r=e.evaluatedExperiments[0],g._loggedTests[r.id]=r,g._abTestMap[r.id]||(g._abTestMap[r.id]=r),a.loggingCallback(r)),"function"==typeof i){var t=i.toString(),s=a.loggingCallback.toString();t!=s&&i(r)}},n)}},override:function(e,t){var a=[e,"0",t].join("|"),r=_.compact([i.get("abov"),a]).join(":");i.set("abov",r)},loggingCallback:function(e){window.dctk&&window.dctk.onReady&&dctk.onReady(function(){e.tpid=u,e.eapid=p,e.guid=d.guid,delete e.name,dctk.logExperiment(e)})}};return g}),require(["jquery","gc/abTestRegistry","env","gc/errorLogging"],function(e,t,i,a){function r(e){try{var t=e;t.hasUser=function(){return!!t.user},t.isUserAnonymous=function(){return t.hasUser()&&t.user.userStatus&&t.user.userStatus.match(/^ANONYMOUS$/i)},t.isUserIdentified=function(){return t.hasUser()&&t.user.userStatus&&t.user.userStatus.match(/^(AUTHENTICATED|IDENTIFIED)$/i)},t.isUserAuthenticated=function(){return t.hasUser()&&t.user.userStatus&&t.user.userStatus.match(/^AUTHENTICATED$/i)},l=t}catch(i){a.logError(i,"pagemodel","gc/pageModel","buildPageModel")}}function n(){define("gc/pageModel",[],function(){return l})}function s(e,t,i){r(l),a.logError(i,"pagemodel","gc/pageModel","$.ajax","Ajax Failed: "+t+" : "+i),"undefined"!=typeof console&&console.warn("failed to get model.json: ["+t+"] ["+i+"]")}try{for(var o="",l={site:{id:0,tpid:0,eapid:0,brandName:"",companyCode:0,defaultDomain:"",langId:0,locale:""},user:{guid:"",userStatus:"ANONYMOUS",hasGroups:!1,arranged:!1},abTests:[]},c=0;c<t.length;c++)o.indexOf(t[c])===-1&&(o+="&id="+t[c]);window.__pageModel?n(r(window.__pageModel)):e.ajax({url:"//"+window.location.host+"/gc/model.json",data:o,dataType:"json",timeout:i.pageModelTimeout,error:function(){}}).done(r).fail(s).always(n)}catch(d){a.logError(d,"pagemodel","gc/pageModel","main")}}),require(["gc/errorLogging","gc/abTest","gc/pageModel"],function(e,t,a){try{"undefined"==typeof window.xp&&(window.xp={}),"undefined"==typeof xp.namespace&&(xp.namespace=function(){var e,t=arguments,a=null;for(i=0;i<t.length;i+=1)for(e=t[i].split("."),a=window,j=0;j<e.length;j+=1)a[e[j]]=a[e[j]]||{},a=a[e[j]];return a}),xp.namespace("xp.nav"),xp.nav.trackAnalytics=function(e,t,i){return"undefined"!=typeof s_exp_trackClick&&s_exp_trackClick&&s_exp_trackClick(e,t,i),!0},xp.nav.trackAnalyticsLanguageLinkWithLangID=function(e,t){window.dctk&&dctk.onReady&&dctk.onReady(function(){dctk.trackAction(e,null,{prop30:t,eVar54:t})})},xp.namespace("xp.nav.event"),xp.nav.event.onDOMReady=function(e){if(window.addEventListener)window.addEventListener("load",e,!1);else if(window.attachEvent)window.attachEvent("onload",e);else if(null!=window.onload){var t=window.onload;window.onload=function(i){t(i),window[e]()}}else window.onload=e},langRedirectionUrl=function(t){try{var i="/pub/agent.dll?qscr=chlg&lang={langID}&ovrd=3&rurl=",a=window.location.pathname,r=t.href.split("?langid=")[1],n=window.location.search,s=window.location.hash,o=t.href,l=a.indexOf("agent.dll")>-1||a.indexOf("/daily/")>-1,c=window.header_feedDomain;i=i.replace("{langID}",r),l&&(o=i+encodeURIComponent(window.location)),c?o="http:"+window.header_feedDomain+i+encodeURIComponent("http:"+window.header_feedDomain+"/"):(""===n&&(n="?"),n=n.indexOf("langid=")>-1?n.replace(/langid=\d+/,"langid="+r):n+"&langid="+r,o=a+n+s),window.location.href=o}catch(d){e.logError(d,"header","header.js","langRedirectionUrl")}},appendRedirectionUrl=function(t,i){try{var a,r,n,i=i||this,s=i.location.pathname,o=(/uurl=([^&]+)/.exec(i.location.search)||[])[1],l=i.header_feedDomain;a=t.href.indexOf("/user/signin")!=-1?"/user/signin?ckoflag=0":t.href.indexOf("/user/login")!=-1?"/user/login?ckoflag=0":t.href.indexOf("/user/createaccount")!=-1?"/user/createaccount?fromheader=true":"/user/logout?",l?a="http:"+i.header_feedDomain+a+"&uurl=http:"+i.header_feedDomain:o&&o.indexOf("e3id")!==-1?a=a+"&uurl="+o:"/Hotel-Search"===s?(r=s+i.location.search+i.location.hash.replace("#",""===i.location.search?"?":"&"),n="&uurl="+encodeURIComponent("e3id=redr&rurl="+r),a+=n):"/"!==s&&(r=s.concat(i.location.search,i.location.hash),n="&uurl="+encodeURIComponent("e3id=redr&rurl="+r),a+=n),i.location.href=a.replace(/\'/g,"").replace(/\"/g,"")}catch(c){e.logError(c,"header","header.js","appendRedirectionUrl")}}}catch(r){e.logError(r,"header","header.js","main")}if(a&&a.site)if(1===a.site.id){t.get(12963,null,!0).value}else if(3===a.site.id){t.get(12977,null,!0).value}else if(25===a.site.id){t.get(12978,null,!0).value}}),require("uitk",function(e){$(".utility-nav a").on("click",function(t){var i=$(this).attr("id"),a=$(this).attr("href"),r=$(this).attr("target"),n=$(this).data("route"),s=$(this).data("omniture-id");e.publish("gc_nav_click",{id:i,href:a,target:r,route:n,omnitureId:s})})}),require("gc/errorLogging",function(e){try{define("module",function(){return{}}),define("exports",function(){return{}}),require("env",function(e){window.site_id=e.siteId}),define("./utils",["handlebars/utils"],function(e){return e}),define("./handlebars/utils",["handlebars/utils"],function(e){return e}),define("./exception",["handlebars/exception"],function(e){return e}),define("./handlebars/exception",["handlebars/exception"],function(e){return e}),define("./safe-string",["handlebars/safe-string"],function(e){return e}),define("./handlebars/safe-string",["handlebars/safe-string"],function(e){return e}),define("./base",["handlebars/base"],function(e){return e}),define("./handlebars/base",["handlebars/base"],function(e){return e}),define("./no-conflict",["handlebars/no-conflict"],function(e){return e}),define("./handlebars/no-conflict",["handlebars/no-conflict"],function(e){return e}),define("./runtime",["handlebars/runtime"],function(e){return e}),define("./handlebars/runtime",["handlebars/runtime"],function(e){return e})}catch(t){e.logError(t,"header","handlebars-amd-bootstrap.js","main")}}),require(["uitk","gc/pageModel","jquery","gc/errorLogging","gc/abTest"],function(e,t,i,a,r){function n(){return window.innerWidth<=725}try{var s=r.get(11946,null,!0).value,o=r.get(12233,null,!0).value,l=s>0,c=t&&("Identified"===t.user.userStatus&&t.user.expUserId<0||"ANONYMOUS"===t.user.userStatus),d=t&&"Identified"===t.user.userStatus,u=t&&"AUTHENTICATED"===t.user.userStatus,p=r.get(12855,null,!0).value&&n();if(u||!l&&d||l&&!c){i("#header-account-menu").addClass("hidden");var h,g=i("#header-account-menu-signed-in"),m=t.user.emailAddress||"";if(m=m.trim(),l&&m.length>20)m=m.substring(0,17).concat("...");else{var f=m.split("@");f[0].length>8&&(f[0]=f[0].substring(0,7).concat("..."),m=f.join("@"))}h=t.user.firstName&&""!=t.user.firstName?t.user.firstName:t.user.emailAddress&&""!=t.user.emailAddress?m:"Guest",p&&i("#account-menu-header .userDetails span").text(h),t.user.arranged?(g.find("#arrangedUserGreetingName").text(h),g.find(".arrangedUser").removeClass("hidden")):(g.find("#userGreetingName").text(h),g.find(".nonArrangedUser").removeClass("hidden")),o>0&&d?(i("#account-signout").addClass("hidden"),1===o?(i("#identified-account-signout-v2").addClass("hidden"),i("#identified-account-signout").removeClass("hidden"),i("#userGreetingNameSignOut").text(h)):2===o&&(i("#identified-account-signout").addClass("hidden"),i("#identified-account-signout-v2").removeClass("hidden"),i("#userGreetingNameSignOut-v2").text(h))):(i("#account-signout").removeClass("hidden"),i("#identified-account-signout").addClass("hidden"),i("#identified-account-signout-v2").addClass("hidden")),g.removeClass("hidden"),p&&i(".notSignedIn").css("display","none")}else if(p&&i(".signedIn").css("display","none"),!n()){var v=i("#account-menu");v.addClass("open fade").find("div.menu").fadeIn("3000",function(){v.find("#header-account-menu").attr("aria-expanded","true"),v.find("div.menu").attr("aria-hidden","false")}),setTimeout(function(){v.find("div.menu").fadeOut("3000",function(){v.removeClass("open fade").find("#header-account-menu").attr("aria-expanded","false"),v.find("div.menu").attr("aria-hidden","true").attr("style","right: 0px; left: auto;")})},1e4)}p&&(i("#account-menu-header").removeClass("hidden"),i("#account-menu").addClass("hidden"),i("#utility-link").addClass("hidden"))}catch(y){a.logError(y,"header","account-menu.js","main")}}),require(["jquery","gc/errorLogging","gc/redirect-banner/model"],function(e,t,i){function a(e){e.find("a").attr("href",s)}function r(e){e.find(".btn-close").on("click",function(){e.addClass("hidden")}),e.removeClass("hidden")}function n(){var t=e("#redirectBanner");a(t),r(t)}var s;try{if(i.isRedirected(window.location)){var s=i.createReturnUrl(window.location);e(document).ready(n)}}catch(o){t.logError(o,"header","redirect-banner/ui.js","main")}}),define("gc/redirect-banner/model",["env"],function(e){"use strict";function t(e){return e.search.indexOf(s)>=0}function i(e){var t=n(e),i="//"+t+"/IpSniffRedir?forceNoRedir=1&userTpid=1&targetUrl="+a(e,t);return i}function a(e,t){return encodeURIComponent(e.protocol+"//"+t+e.pathname+r(e.search))}function r(e){var t=e.indexOf(s),i=e.indexOf("&",t),a=i===-1?e.length:i+1,r=e.replace(e.substring(t,a),"");return r}function n(e){var t=e.search,i=/[^a-zA-Z\.]/,a=t.indexOf(s)+s.length+1,r=t.substring(a),n=r.search(i),o=n===-1?r.length:n,l=r.substring(0,o);return l}var s="rfrr=Redirect.From";return{isRedirected:t,createReturnUrl:i,getRedirectFrom:n,cleanSearch:r}}),require(["gc/pageModel","jquery","gc/errorLogging"],function(e,t,i){var a=void 0,r=void 0,n=void 0,s=void 0,o=!1,l="rewards",c=!1,d=!1,u=!1,p=!1,h={};h.enabled={},h.processPointsAndTiers={},h.showRewardsHeaderAlways={},h.program={},h.program[1178]="td",h.program[1236]="barclays",h.program[1]="rewards",h.program[3]="rewards",h.program[70301]="rewards",h.program[70201]="rewards",h.program[70403]="rewards",h.program[70406]="rewards",h.program[70420]="rewards",h.program[70463]="rewards",h.program[70473]="rewards",h.program[70472]="rewards",h.program[70465]="rewards",h.processPointsAndTiers[1178]=!0,h.processPointsAndTiers[1236]=!0,h.processPointsAndTiers[1]=!0,h.processPointsAndTiers[3]=!0,h.processPointsAndTiers[70301]=!1,h.processPointsAndTiers[70201]=!1,h.processPointsAndTiers[70403]=!1,h.processPointsAndTiers[70406]=!1,h.processPointsAndTiers[70420]=!1,h.processPointsAndTiers[70463]=!1,h.processPointsAndTiers[70473]=!1,h.processPointsAndTiers[70472]=!1,h.processPointsAndTiers[70465]=!1,h.enabled[1]=!0,h.enabled[3]=!0,h.enabled[1236]=!0,h.enabled[1178]=!0,h.enabled[70301]=!0,h.enabled[70201]=!0,h.enabled[70403]=!0,h.enabled[70406]=!0,h.enabled[70420]=!0,h.enabled[70463]=!0,h.enabled[70473]=!0,h.enabled[70472]=!0,h.enabled[70465]=!0,h.showRewardsHeaderAlways[1178]=!0,h.showRewardsHeaderAlways[70301]=!0,h.showRewardsHeaderAlways[70201]=!0,h.showRewardsHeaderAlways[70403]=!0,h.showRewardsHeaderAlways[70406]=!0,h.showRewardsHeaderAlways[70420]=!0,h.showRewardsHeaderAlways[70463]=!0,h.showRewardsHeaderAlways[70473]=!0,h.showRewardsHeaderAlways[70472]=!0,h.showRewardsHeaderAlways[70465]=!0;try{if(e&&(d=h.enabled[e.site.id]===!0,c=d&&h.showRewardsHeaderAlways[e.site.id]===!0,o=d&&h.processPointsAndTiers[e.site.id]===!0,l=void 0!==h.program[e.site.id]?h.program[e.site.id]:l,"rewards"===l?s=t("#rewardsHeader"):l.match(/td|barclays/)&&(s=t("#header-award-module-info")),u=e.isUserIdentified(),p=d&&e.user.loyalty&&e.user.loyalty.rewardsMember),u&&p&&o){if(a=e.user.loyalty.tier,r=e.user.loyalty.tierId,n=parseInt(e.user.loyalty.confirmedPoints),"td"===l){if(r=/^([789]|10|11)$/){r=e.user.loyalty.tierId;var g=document.createElement("img");g.src="//{{domain}}/_dms/group/header/1178/howitworks/logo.png?locale={{locale}}&tierid={{tierid}}".replace("{{locale}}",e.site.locale).replace("{{tierid}}",r).replace("{{domain}}","www.expediafortd.com"),t("#header-howitworks").append(g).removeClass("hidden")}}else if("rewards"===l){var m=s.find(".benefits_link"),f=m.find(".tierBadge"),v=m.attr("href");v=v.replace("color",a),m.attr("href",v),f.addClass(a).text("+"+a)}if(n>0){var y;y=e.user.loyalty.confirmedPointsFormatted?e.user.loyalty.confirmedPointsFormatted:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var w;if("td"===l){w=s.find(".point-balance"),w.text(y);var b=t("#header-cySymbol");b.removeClass("hidden")}if(l.match(/td|barclays/)){var k="td"==l?e.user.loyalty.redeemableDollarValue:e.user.loyalty.cashBalanceFormatted;t("#header-cashValue").text(k)}else w=s.find(".pointsDisplay"),w.text(y+" points");w&&w.removeClass("hidden"),c=!0}}}catch(C){i.logError(C,"header","rewards-badge.js","main")}finally{c&&s&&s.removeClass("hidden").attr("style","")}}),require(["jquery"],function(e){e("#header-container").on("click","a[data-omniture-id]",function(e){var t=e.target,i="a";e.target!==this&&(t=e.target.closest("a"));var a=t.getAttribute("data-omniture-id");try{s_exp_trackClick(t,i,a)}catch(r){}})}),require(["gc/errorLogging"],function(e){window.headerFeedback=function(t){"use strict";try{var i,a,r=screen.width,n=screen.height,s=null!==document.getElementById("home-page"),o=OpinionLab_FB.O_HT(),l="ModalPopUp",c=$("#support-feedback").attr("href").length>0?$("#support-feedback").attr("href"):"/p/info-other/feedback.htm",d=(n-192)/2,u=(r-535)/2;s&&(o=o.replace("Homepage.html","Homepage-new.html")),void 0!==window.header_feedBackUrl&&(c=header_feedBackUrl),i=c+"?referer="+o+"&customvar="+OpinionLab_FB.O_CV()+"&prev="+OpinionLab_FB.O_PRV(),a=["toolbar=no","scrollbars=no","location=no","statusbar=no","menubar=no","resizable=no","width=635px","height=280px","screenX="+u,"screenY="+d,"left="+u,"top="+d].join(",");var p=window.open(i,l,a);p.focus()}catch(t){e.logError(t,"header","header-feedback.js","headerFeedback")}}}),function(){require(["uitk","jquery"],function(e,t){t("#header-container").on(e.clickEvent,"#mobile-toggle-header-link",function(e){t(document.getElementById("globalSiteNavigation")).toggleClass("responsive-menu-shown")})})}();var OpinionLab_FB=function(){function _fC(_u){for(_aT=_sp+",\\/,\\.,-,_,"+_rp+",%2F,%2E,%2D,%5F",_aA=_aT.split(","),i=0;i<5;i++)eval("_u=_u.replace(/"+_aA[i]+"/g,_aA[i+5])");return _u}function _fPe(){Math.random()>=1-_poE&&(O_LC(),_poX=0)}function _fPx(){Math.random()>=1-_poX&&O_LC()}function _populateCustomVar(){var e="",t="";"undefined"!=typeof dctk&&"undefined"!=typeof dctk.omtr?(e="undefined"!=typeof dctk.omtr.prop11?dctk.omtr.prop11:"",t="undefined"!=typeof dctk.omtr.prop12?dctk.omtr.prop12:""):"undefined"!=typeof s_exp?(e="undefined"!=typeof s_exp.prop11?s_exp.prop11:"",t="undefined"!=typeof s_exp.prop12?s_exp.prop12:""):(e="undefined"!=typeof s_prop11?s_prop11:"",t="undefined"!=typeof s_prop12?s_prop12:""),custom_var=t+"|"+e}function _replacePageName(){var e=null;if(e="undefined"!=typeof dctk&&"undefined"!=typeof dctk.omtr?escape(dctk.omtr.pageName)+".html":"undefined"!=typeof s_exp&&"undefined"!=typeof s_exp.pageName?escape(s_exp.pageName)+".html":"undefined"!=typeof s_pageName?escape(s_pageName)+".html":null){var t=e.toLowerCase();t.search("infosite")>=0&&(e=null)}e&&(_domain=_ht.replace("https%3A//","").replace("http%3A//",""),_ht=_ht.substr(0,_ht.indexOf("%3A//"))+"%3A//"+_domain.substr(0,_domain.indexOf("/"))+"/"+e),"undefined"!=typeof bIsCAFR&&1==bIsCAFR&&(_lG="fr-CA.",_rp="%3A//"+_lG),"undefined"!=typeof bIsMSMY&&1==bIsMSMY&&(_lG="ms-my.",_rp="%3A//"+_lG),"undefined"!=typeof OlAltLang&&null!=OlAltLang&&(_lG=OlAltLang,_rp="%3A//"+_lG)}var custom_var,_sp="%3A\\/\\/",_rp="%3A//",_poE=0,_poX=0,_sH=screen.height,_d=document,_w=window,_ht=escape(_w.location.href),_hr=_d.referrer,_tm=(new Date).getTime(),_kp=0,_sW=screen.width;return{O_HT:function(){return _replacePageName(),_ht},O_CV:function(){return _populateCustomVar(),custom_var},O_PRV:function(){return null==_hr||_hr.length<1?"null":escape(_hr)},O_LC:function(e,t,i,a){_replacePageName(),_populateCustomVar(),(null==e||e.length<1)&&(e="comments"),(null==t||t.length<1)&&(t=_ht),(null==i||i.length<1)&&(i=custom_var),a=null==a||a.length<1?_fC(escape(_hr)):"null"==a?"":_fC(escape(a)),_w.open("https://secure.opinionlab.com/ccc01/comment_card.asp?time1="+_tm+"&time2="+(new Date).getTime()+"&prev="+a+"&referer="+_fC(t)+"&height="+_sH+"&width="+_sW+"&custom_var="+i,e,"width=535,height=192,screenX="+(_sW-535)/2+",screenY="+(_sH-192)/2+",top="+(_sH-192)/2+",left="+(_sW-535)/2+",resizable=yes,copyhistory=yes,scrollbars=no")},O_GoT:function(e){_d.write("<a href='javascript:O_LC()'>"+e+"</a>")}}}();if(require(["uitk","gc/pageModel","jquery","gc/errorLogging"],function(e,t,i,a){function r(e){return e.removeClass("hidden").addClass("active")}function n(e){e.find("#arrangee-first-name").text(t.user.firstName),e.find("#arrangee-last-name").text(t.user.lastName)}try{if(t&&t.user&&t.user.arranged&&!t.user.agent){var s=i("#header-alert-banner");n(s),r(s)}}catch(o){a.logError(o,"wizard","travel-arranger.js","main")}}),require(["uitk","gc/pageModel","jquery","gc/errorLogging"],function(e,t,i,a){function r(){i("#agent-arranger-bar-container").load(n)}try{var n="/agent/expe/agentbar";t&&t.user&&t.user.agent&&r()}catch(s){a.logError(s,"wizard","agent-bar.js","main")}}),require("jquery",function(e){var t=e("#header-container").data("tab");void 0!==t&&""!==t&&(e("ul.utility-nav > li").each(function(){e(this).removeClass("selected-tab")}),e("#"+t).addClass("selected-tab"))}),define("gc/script-loader",["jquery"],function(e){function t(t,i){var a=document.createElement("script");a.setAttribute("src",t),a.setAttribute("type","text/javascript"),a.addEventListener("load",i),e("head")[0].appendChild(a)}return t}),require(["uitk","gc/pageModel","gc/script-loader","env","jquery"],function(e,t,i,a,r){var n=t.user.hasGroups;if(location.search.indexOf("hasGroup=true")>=0&&(n=!0),n){var s=a.prefix.replace("http:",""),o=function(){var e="/marketingHeader/branding";r.get(e,function(e){if("npp"==e.model.programName&&dctk.onReady(function(){dctk.clearOmnitureObj(),dctk.trackEvent("o","Use Different Account",{eVar40:e.model.partnerProgramMetadata.companyID})}),e.id){e.id=e.id.toLowerCase(),"pugs"==e.id&&e.model&&e.model.programName&&(e.id=e.model.programName);var t="header/cobrand/"+e.id+"/brandingheader";if("taap"==e.id)var n=setInterval(function(){r("#all-in-rewards-header-link").length&&r("#sub-menu-header-shop-rewards").length&&(clearInterval(n),r("#all-in-rewards-header-link").hide(),r("#sub-menu-header-shop-rewards").hide())},10);var o=s+"/content/"+a.version+"/templates/"+a.siteId+"/"+a.locale+"/"+e.id+".js";i(o,function(){for(prop in e.model)e.model.hasOwnProperty(prop)&&(cugModel[prop]=e.model[prop]);require("handlebars.runtime",function(e){var i=document.createElement("div");i.innerHTML=e.templates[t](cugModel),r("#cobranded-header").html(i).show()})})}})};modulizr.amd.handlebarsv3?o():i(s+"/content/"+a.version+"/scripts/hbs.js",o)}}),function(){define("gc/sp-tray-item-prototype",["jquery"],function(e){return{set:function(e,t,i){this.attributes[e]&&this.attributes[e]===t||(this.attributes[e]=t,i&&this.updateDisplay())},get:function(e){var t=null;return this.attributes[e]&&(t=this.attributes[e]),t},localizedAsOfKey:function(){return"SHORT_TIME"===this.get("dateTimeFormatType")?"asOfTime":"asOfDate"},insertBefore:function(e){this.$el.insertBefore(e)},appendTo:function(e){e.append(this.$el)},removeFromTray:function(){this.$el.remove()},moveToIndex:function(e){this.trayIndex=e},updateDisplay:function(){var t=e(e.trim(this.template(this.attributes))).find(".item-link");this.$el.empty().html(t),1===this.trayIndex&&this.$el.addClass("first")}}})}(),function(){define("gc/sp-car-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i="";"daily"===e.pricePeriod?i=t.daily:"weekly"===e.pricePeriod?i=t.weekly:"total"===e.pricePeriod&&(i=t.total);var a='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><img src="//images.trvl-media.com/cars'+e.thumbnailUrl+'" alt="'+e.carName+'" class="image" aspectRatio="1-1" onerror="this.onerror=null;this.src=\'/static/default/default/images/car/no_photo.png\';"></span><h4 class="item-title">'+e.carName+'</h4><p class="item-date">'+e.pickupDate+" - "+e.dropOffDate+'</p><p class="item-dummy item-nested">'+e.pickupLocation+'</p><div class="item-price-urgency"><strong class="price">'+e.price+"</strong>"+i+'<p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";
return a},r=function(t){var r=scratchpadTray.view.strings.item;this.trayIndex=t.trayIndex,this.template=a;var r=i.item;if(t.product){if(this.type="carDetail",this.attributes=t.carDetail,this.get("price")){var n=r.from.replace("{{itemPrice}}",this.get("price"));this.set("price",n),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",r.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",r.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))}else this.set("price",""),this.set("lastSeen","See price");this.$el=e(e.trim(this.template(this.attributes,r)))}};return r.prototype=t,r})}(),function(){define("gc/sp-car-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i="AIRPORT"==e.pickupRegionType?t.carsAt:t.carsNear;i=i.replace("{{destination}}",e.pickupLocation);var a='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-carsalt"></span></span><h4 class="item-title">'+i+'</h4><p class="item-date">'+e.pickupDate+" - "+e.dropOffDate+'</p><p class="item-dummy item-nested"></p><div class="item-price-urgency"><strong class="price">'+e.price+"</strong>"+t.daily+'<p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return a},r=function(t){var r=scratchpadTray.view.strings.item;this.trayIndex=t.trayIndex,this.template=a;var r=i.item;if(t.product){if(this.type="carSearch",this.attributes=t.carSearch,"AIRPORT"==this.get("pickupRegionType")?this.set("txtPreLocation",r.carsAt.replace("{{destination}}",this.get("pickupLocation"))):this.set("txtPreLocation",r.carsNear.replace("{{destination}}",this.get("pickupLocation"))),this.get("price")){var n=r.from.replace("{{itemPrice}}",this.get("price"));this.set("price",n),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",r.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",r.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))}else this.set("price",""),this.set("lastSeen","See price");this.$el=e(e.trim(this.template(this.attributes,r)))}};return r.prototype=t,r})}(),function(){define("gc/sp-cruise-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i=t.allDestinations;e.destination&&(i=e.destination);var a=t.allMonths;e.departureDate&&(a=e.departureDate);var r='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-cruisealt"></span></span><h4 class="item-title">'+i+'</h4><p class="item-date">'+a+'</p><p class="item-dummy item-nested"></p><div class="item-price-urgency"><strong class="price">'+e.price+"</strong>"+t.perNight+'<p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return r},r=function(t){var r=scratchpadTray.view.strings.item;this.trayIndex=t.trayIndex,this.template=a;var r=i.item;if(t.product){if(this.type="cruiseSearch",this.attributes=t.cruiseSearch,this.get("price")){var n=r.from.replace("{{itemPrice}}",this.get("price"));this.set("price",n),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",r.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",r.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))}else this.set("price",""),this.set("lastSeen","See price");this.$el=e(e.trim(this.template(this.attributes,r)))}};return r.prototype=t,r})}(),function(){define("gc/sp-flight-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i=e.legs.length,a="",r=0;for(r;r<i;r++){var n=e.legs[r],s="//images.trvl-media.com/media/content/expus/graphics/static_content/fusion/v0.1b/images/airlines/s/",o="multiple_airlines_logo",l=t.multiAirlineAltText,c=t.fromToAirports.replace("{{departureAirportCode}}",n.departureAirportCode).replace("{{arrivalAirportCode}}",n.arrivalAirportCode),d=t.fromToTime.replace("{{startTime}}",n.departureTime).replace("{{endTime}}",n.arrivalTime),u="";r>0&&(u=" item-group-gap");var p=n.numberOfDays?' <span class="number-of-days">+'+n.numberOfDays+"</span>":"";n.airlineImageFileName&&(o=n.airlineImageFileName,l=n.airlineName+t.airlineLogoAltText),s=s+o+"_sq.jpg",a=a+'<span class="item-img-icon'+u+'"><img src="'+s+'" alt="'+l+'" class="image" aspectRatio="1-1"></span><h4 class="item-title'+u+'">'+c+'</h4><p class="item-date"><span class="departure-date">'+n.departureDate+'</span><!----><span class="time-range">'+d+"</span>"+p+"</p>"}var h='<li class="scratchpad-item flight-detail"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data">'+a+'<div class="item-price-urgency"><strong class="price">'+e.formattedPricePerPerson+'</strong><p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return h},r=function(t){var r="",n=i.item;this.trayIndex=t.trayIndex,this.template=a,t.product&&(this.type="flightDetail",this.attributes=t.flightDetail,this.get("formattedPricePerPerson")?(this.set("price",this.get("formattedPricePerPerson")),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",n.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",n.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))):(this.set("formattedPricePerPerson",""),this.set("lastSeen","See price")),r=/\?/.test(this.attributes.url)?"&":"?",this.set("rfrrString",r+"rfrr=SP.Tray."+this.trayIndex+".FD"),this.set("deepLinkUrl",this.get("url")+this.get("rfrrString")),this.$el=e(e.trim(this.template(this.attributes,n))))};return r.prototype=t,r})}(),function(){define("gc/sp-flight-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-flightsalt"></span></span><h4 class="item-title">'+e.airportToAirport+'</h4><p class="item-date">'+e.departureDate+e.returnDate+'</p><p class="item-info item-nested">'+e.routeType+'</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return i},r=function(t){var r="",n=i.item;if(this.trayIndex=t.trayIndex,this.template=a,t.product){this.type="flight",this.attributes=t.flight;var s=n.fromToAirports.replace("{{departureAirportCode}}",this.get("departureAirportCode")).replace("{{arrivalAirportCode}}",this.get("arrivalAirportCode"));if(this.set("airportToAirport",s),this.get("price")){"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",n.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeen"))):this.set("lastSeen",n.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeen")));var o=n.from.replace("{{itemPrice}}",this.get("price"));this.set("price",o)}else this.set("price",""),this.set("lastSeen","See price");if(r=/\?/.test(this.attributes.deepLinkUrl)?"&":"?",this.get("returnDate")?this.set("returnDate"," - "+this.get("returnDate")):this.set("returnDate",""),this.set("rfrrString",r+"rfrr=SP.Tray."+this.trayIndex+".FS"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.get("routeType")){var l=this.get("routeType").replace("ROUND_TRIP",n.roundTrip).replace("ONE_WAY",n.oneWay);this.set("routeType",l)}this.$el=e(e.trim(this.template(this.attributes,n))),this.get("departureDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless")}};return r.prototype=t,r})}(),function(){define("gc/sp-hotel-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><img src="//images.trvl-media.com'+e.thumbnailUrl+'" alt="'+e.hotelName+'" class="image" aspectRatio="1-1"></span><h4 class="item-title">'+e.hotelName+'</h4><p class="item-date">'+e.checkInDate+" - "+e.checkOutDate+'</p><p class="item-watches item-nested">&nbsp;</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-nested">'+e.lastSeenDate+"</p></div></div></a></li>";return i},r=function(t){var r="",n=i.item;this.trayIndex=t.trayIndex,this.template=a,t.product&&(this.type="hotel",this.attributes=t.hotel,this.get("price")?"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeenDate",n.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeenDate",n.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate"))):(this.set("price",""),this.set("lastSeenDate",n.seePrice)),r=/\?/.test(this.get("deepLinkUrl"))?"&":"?",this.set("rfrrString",r+"rfrr=SP.Tray."+this.trayIndex+".HI"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.get("thumbnailUrl")&&this.set("thumbnailUrl",this.get("thumbnailUrl").replace("_s","_t")),this.$el=e(e.trim(this.template(this.attributes,n))),this.get("checkInDate")&&this.get("checkOutDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless"))};return r.prototype=t,r})}(),function(){define("gc/sp-hotel-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i=e.amount?'<div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+t.hotelSearchAvgPerNight+'</p><p class="item-nested">'+t.asOfDate.replace("{{lastSeenDate}}",e.lastSeenDate)+"</p></div>":"",a='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-hotelsalt"></span></span><h4 class="item-title">'+t.hotels.replace("{{destination}}",e.destination)+'</h4><p class="item-date">'+t.fromToDate.replace("{{startDate}}",e.checkInDate).replace("{{endDate}}",e.checkOutDate)+'</p><p class="item-watches item-nested">&nbsp;</p>'+i+"</div></a></li>";return a},r=function(t){var r="",n=i.item;this.trayIndex=t.trayIndex,this.template=a,t.product&&(this.type="hotelSearch",this.attributes=t.hotelSearch,this.set("viewCount",0),r=/\?/.test(this.get("deepLinkUrl"))?"&":"?",this.set("rfrrString",r+"rfrr=SP.Tray."+this.trayIndex+".HS"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.get("thumbnailUrl")&&this.set("thumbnailUrl",this.get("thumbnailUrl").replace("_s","_t")),this.$el=e(e.trim(this.template(this.attributes,n))))};return r.prototype=t,r})}(),function(){define("gc/sp-package-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i=t.packageIncludes,a=t.packages.replace("{{packageDestination}}",e.packageDestination),r='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-packagesalt"></span></span><h4 class="item-title">'+a+'</h4><p class="item-date item-nested">'+e.departureDate+e.returnDate+'</p><p class="item-info item-nested">'+i+'</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+t.perPerson+'</p><p class="item-package-message">'+e.lastSeen+'</p></div><span class="item-img-icon"></span></div></a></li>';return r},r=function(t){var r="",n=i.item;if(this.trayIndex=t.trayIndex,this.template=a,t.product){if(this.type="package",this.attributes=t.packages,this.get("price")){var s=n.from.replace("{{itemPrice}}",this.get("price"));"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",n.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeen"))):this.set("lastSeen",n.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeen"))),this.set("price",s)}else this.set("price",""),this.set("lastSeen","See price");this.get("returnDate")?this.set("returnDate"," - "+this.get("returnDate")):this.set("returnDate",""),r=/\?/.test(this.attributes.deepLinkUrl)?"&":"?",this.set("rfrrString",r+"rfrr=SP.Tray."+this.trayIndex+".PS"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.$el=e(e.trim(this.template(this.attributes,n)))}};return r.prototype=t,r})}(),function(){define("gc/sp-activity-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i="";e.price&&(i=t.perTraveler);var a='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-activitiesalt"></span></span><h4 class="item-title">'+e.destination+'</h4><p class="item-watches item-nested">&nbsp;</p><div class="item-price-urgency lx"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+i+'</p><p class="item-nested">'+e.lastSeenDate+"</p></div></div></a></li>";return a},r=function(t){var r="",n=i.item;this.trayIndex=t.trayIndex,this.template=a,t.product&&(this.type="activitySearch",this.attributes=t.activitySearch,this.get("price")?"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeenDate",n.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeenDate",n.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate"))):(this.set("price",""),this.set("lastSeenDate",n.seePrice)),r=/\?/.test(this.get("deepLink"))?"&":"?",this.set("rfrrString",r+"rfrr=SP.Tray."+this.trayIndex+".ACS"),this.set("deepLink",this.get("deepLink")+this.get("rfrrString")),this.$el=e(e.trim(this.template(this.attributes,n))),this.get("startDate")&&this.get("endDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless"))};return r.prototype=t,r})}(),function(){define("gc/sp-activity-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,i){var a=function(e,t){var i="";e.price&&(i=t.perTraveler);var a='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><img src="'+e.thumbnail+'" alt="'+e.title+'" class="image lx" aspectRatio="1-1"></span><h4 class="item-title">'+e.title+'</h4><p class="item-date"><span class="icon icon-time"></span> '+e.duration+'</p><p class="item-watches item-nested">&nbsp;</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+i+'</p><p class="item-nested">'+e.lastSeenDate+"</p></div></div></a></li>";return a},r=function(t){var r="",n=i.item;this.trayIndex=t.trayIndex,this.template=a,t.product&&(this.type="activityDetail",this.attributes=t.activityDetail,this.get("price")?"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeenDate",n.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeenDate",n.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate"))):(this.set("price",""),this.set("lastSeenDate",n.seePrice)),r=/\?/.test(this.get("deepLink"))?"&":"?",this.set("rfrrString",r+"rfrr=SP.Tray."+this.trayIndex+".ACD"),this.set("deepLink",this.get("deepLink")+this.get("rfrrString")),this.get("thumbnail")&&this.set("thumbnail",this.get("thumbnail")),this.$el=e(e.trim(this.template(this.attributes,n))),this.get("startDate")&&this.get("endDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless"))};return r.prototype=t,r})}(),function(){define("gc/scratchpadtrayitem",["gc/sp-hotel-details-item","gc/sp-hotel-search-item","gc/sp-flight-details-item","gc/sp-flight-search-item","gc/sp-package-search-item","gc/sp-car-details-item","gc/sp-car-search-item","gc/sp-cruise-search-item","gc/sp-activity-search-item","gc/sp-activity-details-item"],function(e,t,i,a,r,n,s,o,l,c){var d={validateItemLob:function(e){return e.hasOwnProperty("product")},validateItemActionType:function(e){return e.hasOwnProperty("type")},buildCompoundItemType:function(e){return e.product+"-"+e.type}},u={isSourceDataValid:function(e){return d.validateItemLob(e)&&d.validateItemActionType(e)},determineSourceDataType:function(e){return this.isSourceDataValid(e)?d.buildCompoundItemType(e)||"NOT-FOUND":{}}};return function(d){var p={"HOTEL-DETAIL":e,"HOTEL-SEARCH":t,"AIR-DETAIL":i,"AIR-SEARCH":a,"PACKAGE-SEARCH":r,"CAR-DETAIL":n,"CAR-SEARCH":s,"CRUISE-SEARCH":o,"ACTIVITY-SEARCH":l,"ACTIVITY-DETAIL":c},h=u.determineSourceDataType(d);return new p[h](d)}})}(),function(e){/localhost/.test(window.location);define("gc/scratchpadtraycontroller",["gc/userhistoryapi","gc/scratchpadtrayitem","gc/abTest","uitk"],function(e,t,i,a){return{requiresHistory:!0,disableTray:!1,init:function(e){return this.view=e,this.buildRfrr().bindListeners().getCount()},buildRfrr:function(){if(this.disableTray){var e=$("#header-history"),t=e.attr("href")+"?rfrr=SP.NoTray.SP";e.attr("href",t)}return this},bindListeners:function(){var e=this;return this.view.on("click.tab.first",function(){e.getHistoryData(5)}),this.view.on("click.tab",function(){e.logInteraction("Header.SP.Tray.Interaction")}),a.subscribe("sp:count:newCount",function(t,i){e.handleCountSuccess(i.response)}),a.subscribe("sp:count:fail",function(t,i){e.handleCountSuccess(i.response)}),a.subscribe("sp:history:newHistory",function(t,i){e.handleHistorySuccess(i.response)}),a.subscribe("sp:history:fail",function(t,i){e.handleHistoryFailure(i.response)}),this},getCount:function(){return e.getHistoryCount(),this},handleCountSuccess:function(e){if(e&&e.hasOwnProperty("count")){if(this.view.badge.updateContent(e.count),this.disableTray)return $(".site-navigation .user-history-tab").css("margin-left","0px"),this;this.view.navAnchor.becomeMenu(),0===e.count?(this.view.menu.showEmptyState(),this.requiresHistory=!1):this.view.navAnchor.bindFirstClickHandler(this.view)}else this.handleCountFail();return this},handleCountFail:function(){return this.view.badge.hide(),this.disableTray?($(".site-navigation .user-history-tab").css("margin-left","0px"),this):(this.view.navAnchor.becomeMenu(),this.view.navAnchor.bindFirstClickHandler(this.view),this)},getHistoryData:function(t){return this.requiresHistory&&!this.disableTray&&e.getHistoryData(t||5),this},handleHistorySuccess:function(e){return e&&e.userHistory&&e.userHistory.length&&!this.disableTray?this._receiveNewHistoryData(e.userHistory):this.handleHistoryFailure(),this},handleHistoryFailure:function(){return this.disableTray?this:(this.view.menu.showEmptyState(),this)},logInteraction:function(e){return window.dctk&&window.dctk.onReady&&dctk.onReady(function(){dctk.omtr.eVar28=e,dctk.omtr.events="event80",dctk.omtr.linkTrackVars="eVar28,events",dctk.omtr.linkTrackEvents="event80,event81",dctk.omtr.tl(!0,"o","RFRR Action Link")}),this},logExperimentExposure:function(e,t){},_receiveNewHistoryData:function(e){for(var i=[],a=0;a<e.length;a++)null!=e[a]&&(e[a].trayIndex=a,i.push(new t(e[a])));return this.view.menu.updateItemList(i),this}}}),define("gc/scratchpadtrayview",["jquery"],function(e){return{_callbacks:{},_$el:null,init:function(){return this._captureEls()._captureStrings()._captureTemplates()._bindClickHandlers()},on:function(e,t){return"function"==typeof t&&(this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(t)),this},trigger:function(e,t){for(var i=this._callbacks[e]||[],a=0;a<i.length;a++)i[a](t);return this},badge:{$el:null,strings:{},updateContent:function(t){return this._updateCount(t)._updateScreenReaderText(t),e(".site-navigation .user-history-tab").css("margin-left","0px"),this[t>0?"show":"hide"]()},show:function(){return this.$el.css("display","inline-block"),this},hide:function(){return this.$el.hide(),this},flareAnimation:function(){},bindClickHandlers:function(e){},unbindClickHandlers:function(){},_updateCount:function(e){return this.$el.find(".count").text(e),this},_updateScreenReaderText:function(e){var t=1===e?this.strings.badgeSRSingle:this.strings.badgeSRMany.replace("{{count}}",e);return this.$el.find(".badge-description").text(t),this}},navAnchor:{$el:null,becomeMenu:function(){return this.$el.find(".arrow-placeholder").html("").addClass("icon icon-toggle180"),this.$el.attr("data-control","menu").attr("href","javascript:void(0)").trigger("scratchpad.turnedOn"),e("<div>").addClass("scratchpad-arrow").insertAfter(this.$el),e(".site-navigation .user-history-tab").css("margin-left","0px"),this},bindClickHandlers:function(e,t){return t?this.bindFirstClickHandler(e):this.bindDefaultClickHandler(e),this},bindFirstClickHandler:function(e){var t=this,i=function(){e.trigger("click.tab.first"),t.bindDefaultClickHandler(e)};return this.$el.off("click").on("click",i),this},bindDefaultClickHandler:function(e){return this.$el.off("click").on("click",function(){e.trigger("click.tab")}),this}},menu:{_state:{loading:!0,items:[]},$el:null,updateItemList:function(e){e&&(this._state.items=this._state.items.concat(e));var t=this.$el.find(".item-list"),i=0,a=this._state.items.length;for(t.empty(),i;i<a;i++)this._state.items[i].appendTo(t);return this.showListState()},showLoadingState:function(){},hideLoadingState:function(e){return this._state.loading=!1,this.$el.find(".loading-wrapper").fadeOut("fast"),this.$el.find(".loader").removeClass("loading"),this.$el.find(".loading-message").fadeOut("fast",e),this},showEmptyState:function(){var e=this,t=function(){e.$el.find(".default-message").fadeIn()};return this.hideLoadingState(t),this},showListState:function(){var e=this,t=function(){e.$el.find(".item-list").fadeIn()};return this.hideLoadingState(t),this},bindClickHandlers:function(e){},unbindClickHandlers:function(){}},tooltip:{_state:{},$el:null,template:null,reRender:function(){},show:function(){},hide:function(){},updateContent:function(){}},_captureEls:function(){return this._$el=e(".user-history-tab.scratchpad"),this.navAnchor.$el=this._$el.find(".nav-tab"),this.badge.$el=this._$el.find(".sp-badge"),this.menu.$el=e(".menu"),this.tooltip.$el=e(""),this},_captureStrings:function(){return this.strings=JSON.parse(this._$el.attr("data-localized-content")),this.navAnchor.strings=this.strings.link,this.badge.strings=this.strings.badge,this.menu.strings=this.strings.menu,this.tooltip.strings=this.strings.tooltip,this},_captureTemplates:function(){return this.menu.template=e("").html(),this.tooltip.template=e("").html(),this},_bindClickHandlers:function(){return this.navAnchor.bindClickHandlers(this),this}}}),require(["gc/scratchpadtraycontroller","gc/scratchpadtrayview","jquery"],function(e,t,i){"complete"==document.readyState?window.scratchpadTray=e.init(t.init()):i(window).on("load",function(){window.scratchpadTray=e.init(t.init())})}),require(["gc/abTest","jquery","gc/errorLogging"],function(e,t,i){var a=e.get(13056,null,!0).value,r=function(e,t){return e>0?t+"_"+e:t};if(t(".user-history-tab.scratchpad").length>0&&t(".user-history-tab.scratchpad").attr("data-localized-content"))try{var n=JSON.parse(t(".user-history-tab").attr("data-localized-content"));if(t(".view-all-history.item-link").length>0){var s=t(".view-all-history.item-link"),o=r(a,"viewAllPlain");s.text(n.menu[o])}if(t(".greeting-message.loading-message").length>0){var l=t(".greeting-message.loading-message"),c=r(a,"loading");l.text(n.menu[c])}if(t(".sp-name").length>0){var d=t(".sp-name"),u=r(a,"scratchpadName");d.text(n.link[u])}}catch(p){i.logError(p,"header","gc/scratchpadBranding","getScratchpadBranding")}})}(window),function(){var e={};require("jquery",function(t){t(".user-history-tab.scratchpad").length>0&&t(".user-history-tab.scratchpad").attr("data-localized-content")&&(e=JSON.parse(t(".user-history-tab.scratchpad").attr("data-localized-content")),define("gc/sp-tray-strings",[],function(){return e}))})}(),function(){var e={currentPath:window.location,defaultId:"-1",jsonpSuffix:"&format=jsonp&callback=?",prodCountEndpoint:"/userHistory/count?",labCountEndpoint:"/userHistory/count?",prodHistoryEndpoint:"/api/userhistory?",labHistoryEndpoint:"/api/userhistory?",lobQuery:function(e){return 1===e?"&lobs=HOTEL_DETAIL&lobs=HOTEL_SEARCH&lobs=AIR_SEARCH&lobs=AIR_DETAIL&lobs=CAR_SEARCH&lobs=CAR_DETAIL&lobs=PACKAGE_SEARCH&lobs=CRUISE_SEARCH&lobs=ACTIVITY_SEARCH&lobs=ACTIVITY_DETAIL":"&lobs=HOTEL_DETAIL&lobs=HOTEL_SEARCH&lobs=AIR_SEARCH&lobs=AIR_DETAIL&lobs=CAR_SEARCH&lobs=PACKAGE_SEARCH&lobs=CRUISE_SEARCH&lobs=ACTIVITY_SEARCH&lobs=ACTIVITY_DETAIL"}},t={isLab:function(e){return/trunk/.test(e.hostname)},formatGuid:function(e){return 5===e.split("-").length?e:[e.substring(0,8),e.substring(8,12),e.substring(12,16),e.substring(16,20),e.substring(20)].join("-")},userIsAnon:function(e){return"ANONYMOUS"===e.userStatus},userHasGuid:function(e){return e.hasOwnProperty("guid")},userHasTuid:function(e){return e.hasOwnProperty("tuid")&&e.tuid>0},userHasExpuid:function(e){return e.hasOwnProperty("expUserId")},envCountEndpoint:function(t){return t?e.labCountEndpoint:e.prodCountEndpoint},envHistoryEndpoint:function(t){return t?e.labHistoryEndpoint:e.prodHistoryEndpoint},makeGuidParamString:function(e,t){return t?"":"&guid="+e},makeTuidParamString:function(e){return"&tuid="+e},makeExpuidParamString:function(e){return"&expuserid="+e},makeLimitParamString:function(e){return"l="+(e||5)},makeSiteIdParamString:function(e){return"&siteid="+e},extendRequestObjWithDefaults:function(e){return{url:e,timeout:5e3}},extendRequestObjWithJSONP:function(t){return{url:t+e.jsonpSuffix,dataType:"jsonp",timeout:5e3}}},i={getUserExpuid:function(i){return t.userHasExpuid(i.user)?i.user.expUserId:e.defaultId},getUserTuid:function(i){return t.userHasTuid(i.user)?i.user.tuid:e.defaultId},getUserGuid:function(i){return t.userHasGuid(i.user)?t.formatGuid(i.user.guid):e.defaultId},buildCountEndpoint:function(i,a,r){return[t.envCountEndpoint(t.isLab(e.currentPath)),t.makeGuidParamString(this.getUserGuid(i),t.userHasTuid(i.user)),t.makeTuidParamString(this.getUserTuid(i)),t.makeExpuidParamString(this.getUserExpuid(i)),t.makeSiteIdParamString(a.siteId),e.lobQuery(r)].join("")},buildHistoryEndpoint:function(i,a,r,n){return[t.envHistoryEndpoint(t.isLab(e.currentPath)),t.makeLimitParamString(i),t.makeGuidParamString(this.getUserGuid(a),t.userHasTuid(a.user)),t.makeTuidParamString(this.getUserTuid(a)),t.makeExpuidParamString(this.getUserExpuid(a)),t.makeSiteIdParamString(r.siteId),e.lobQuery(n)].join("")}};define("gc/userhistoryapi",["uitk","jquery","gc/pageModel","env","gc/abTest"],function(e,a,r,n,s){return{getHistoryCount:function(){return this._makeNormalRequest(i.buildCountEndpoint(r,n,s.get(10044).value)).done(function(t){e.publish("sp:count:newCount",{src:this,response:t})}).fail(function(t){e.publish("sp:count:fail",{src:this,response:t})}),this},getHistoryData:function(t){return this._makeNormalRequest(i.buildHistoryEndpoint(t,r,n,s.get(10044).value)).done(function(t){e.publish("sp:history:newHistory",{src:this,response:t})}).fail(function(t){e.publish("sp:history:fail",{src:this,response:t})}),this},_makeNormalRequest:function(e){return a.ajax(t.extendRequestObjWithDefaults(e))},_makeJSONPRequest:function(e){return a.ajax(t.extendRequestObjWithJSONP(e))}}})}(),function(){define("gc/alertmenu-templates",["handlebars","gc/alertmenu-strings"],function(e,t){return{SPHCONEUPONLYV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon up'><img src='/static/default/default/images/scratchpad/alerts-up-2x.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.upOne+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,SPHCUPONLYV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon up'><img src='/static/default/default/images/scratchpad/alerts-up-2x.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.upMany+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,SPHCONEDOWNONLYV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon down'><img src='/static/default/default/images/scratchpad/alerts-down-2x.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.downOne+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,SPHCDOWNONLYV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon down'><img src='/static/default/default/images/scratchpad/alerts-down-2x.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.downMany+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,SPHCBOTHONEV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon up-and-down'><img src='/static/default/default/images/scratchpad/alerts-up-down.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.downOneUpOne+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,SPHCONEUPV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon up-and-down'><img src='/static/default/default/images/scratchpad/alerts-up-down.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.downManyUpOne+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,SPHCONEDOWNV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon up-and-down'><img src='/static/default/default/images/scratchpad/alerts-up-down.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.downOneUpMany+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,SPHCV2:void 0!==t.scratchpadPriceChanges?e.compile("<div class='alert-icon up-and-down'><img src='/static/default/default/images/scratchpad/alerts-up-down.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.scratchpadPriceChanges.changes+" "+t.scratchpadPriceChanges.downManyUpMany+" <a href='/scratchpad?rfrr=Header.Notif.SPNews' data-action='spDetailedNews'>"+t.scratchpadPriceChanges.details+"</a></div></div>"):null,spSignIn:void 0!==t.defaultAlerts?e.compile("<div class='alert-body centered'><div class='alert-message'>"+t.defaultAlerts.greeting+"<br><a href='/user/login?&ckoflag=0' data-action='spSignIn'>"+t.defaultAlerts.signIn+"</a></div></div>"):null,spNudgeEnroll:void 0!==t.nudgeEnrollment?e.compile("<div class='alert-icon'><img src='/static/default/default/images/scratchpad/alerts-mail-72.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.nudgeEnrollment.title+" "+t.nudgeEnrollment.subtitle+" <a class='spAccessibleButtonLink' href='javascript:void(0)' data-action='spNudgeEnroll' data-trigger-delete='false'>"+t.nudgeEnrollment.action+"</a></div></div>"):null,spBasicNews:void 0!==t.defaultAlerts?e.compile("<div class='alert-icon updown'><img src='/static/default/default/images/scratchpad/alerts-up-down.png' alt=''></div><div class='alert-body'><div class='alert-message'><b>"+t.defaultAlerts.somethingChanged+"</b> "+t.defaultAlerts.foundUpdates+" <a href='/scratchpad?rfrr=Header.Notif.SP' data-action='spBasicNews'>"+t.defaultAlerts.whatChanged+"</a></div></div>"):null,itinBouncedEmail:void 0!==t.itin?e.compile("<div class='alert-icon'><img src='/static/default/default/images/scratchpad/alerts-yellowalert-2x.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.itin.bouncedEmail+" <a href='/trips'>"+t.itin.bouncedEmailLink+"</a></div></div>"):null,
HOTELCOUPONAVAILABILITYV1:void 0!==t.rewards?e.compile("<div class='alert-icon'><img src='//images.trvl-media.com/media/content/expus/graphics/other/rewards/icons/rewards-notification-pluses.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.rewards.hotelCouponAvailability+" <a href='/Hotels?rfrr=Header.Notif.Rewards.ShopHotels'>"+t.rewards.hotelCouponAvailabilityLink+"</a></div></div>"):null,HOTELCOUPONAVAILABILITYV2:void 0!==t.rewards?e.compile("<div class='alert-icon'><img src='//images.trvl-media.com/media/content/expus/graphics/other/rewards/icons/rewards-notification-pluses.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.rewards.hotelCouponAvailability+" <a href='/Hotels?rfrr=Header.Notif.Rewards.ShopHotels' target='_blank'>"+t.rewards.hotelCouponAvailabilityLink+"</a></div></div>"):null,VIPCOUPONAVAILABILITYV1:void 0!==t.rewards?e.compile("<div class='alert-icon'><img src='//images.trvl-media.com/media/content/expus/graphics/other/rewards/icons/rewards-notification-pluses.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.rewards.VIPCouponAvailability+" <a href='/rewards/vipaccess?rfrr=Header.Notif.Rewards.ShopVIPHotels'>"+t.rewards.VIPCouponAvailabilityLink+"</a></div></div>"):null,VIPCOUPONAVAILABILITYV2:void 0!==t.rewards?e.compile("<div class='alert-icon'><img src='//images.trvl-media.com/media/content/expus/graphics/other/rewards/icons/rewards-notification-pluses.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.rewards.VIPCouponAvailability+" <a href='/rewards/vipaccess?rfrr=Header.Notif.Rewards.ShopVIPHotels' target='_blank'>"+t.rewards.VIPCouponAvailabilityLink+"</a></div></div>"):null,HOTELCOUPONEXPIRATIONV1:void 0!==t.rewards?e.compile("<div class='alert-icon'><img src='//images.trvl-media.com/media/content/expus/graphics/other/rewards/icons/rewards-notification-warning.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.rewards.hotelCouponExpirationV1+" <a href='/Hotels?rfrr=Header.Notif.Rewards.ShopHotelsExpiring'>"+t.rewards.hotelCouponAvailabilityLink+"</a></div></div>"):null,HOTELCOUPONEXPIRATIONV2:void 0!==t.rewards?e.compile("<div class='alert-icon'><img src='//images.trvl-media.com/media/content/expus/graphics/other/rewards/icons/rewards-notification-warning.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.rewards.hotelCouponExpirationV2+" <a href='/user/account?selc=coupons&rfrr=Header.Notif.Rewards.VisitAcct'>"+t.rewards.hotelCouponExpirationLinkV2+"</a></div></div>"):null,CHROMEEXTENSIONNEWS:void 0!==t.chromeExtensionNotification?e.compile("<div class='alert-icon'><img src='//images.trvl-media.com/media/content/shared/graphics/icons/chrome-web-store_icon_2x.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.chromeExtensionNotification.message+" <a id='extension-install-launch' href='javascript:void(0)' data-action='addChromeExtension' data-trigger-delete='true'>"+t.chromeExtensionNotification.link+"</a></div></div>"):null,AARPMEMBERLINK:void 0!==t.brandMessages?e.compile("<div class='alert-icon' style='color:green'><span class='icon icon-infoalt' aria-hidden='true'></span></div><div class='alert-body'><div class='alert-message'>"+t.brandMessages.switchToAarp+"</div></div>"):null,TAAPWELCOMEMESSAGE:void 0!==t.taapMessages?e.compile("<div class='taap-news-wrapper'><div class='taap-logo-white-icon'><span class='taap-center-helper'></span><img class='taap-logo' src='//images.trvl-media.com/media/content/expus/graphics/taap/taap-logo-white_40.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.taapMessages.welcomeMessage+" <a href='/TAAP-LearnMore?rfrr=Header.Notif.TAAPWelcome'>"+t.taapMessages.welcomeMessageLink+"</a></div></div></div>"):null,TAAPGBVREMAININGNEWSSILVER:void 0!==t.taapMessages?e.compile("<div class='taap-news-wrapper'><div class='taap-logo-white-icon'><span class='taap-center-helper'></span><img class='taap-logo' src='//images.trvl-media.com/media/content/expus/graphics/taap/taap-logo-white_40.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.taapMessages.gbvRemainingMessageSilver+" <a href='/TAAP/IncentivePlan?rfrr=Header.Notif.TAAPGBVNextTier'>"+t.taapMessages.gbvRemainingLink+"</a></div></div></div>"):null,TAAPGBVREMAININGNEWSGOLD:void 0!==t.taapMessages?e.compile("<div class='taap-news-wrapper'><div class='taap-logo-white-icon'><span class='taap-center-helper'></span><img class='taap-logo' src='//images.trvl-media.com/media/content/expus/graphics/taap/taap-logo-white_40.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.taapMessages.gbvRemainingMessageGold+" <a href='/TAAP/IncentivePlan?rfrr=Header.Notif.TAAPGBVNextTier'>"+t.taapMessages.gbvRemainingLink+"</a></div></div></div>"):null,TAAPGBVREMAININGNEWSPLATINUM:void 0!==t.taapMessages?e.compile("<div class='taap-news-wrapper'><div class='taap-logo-white-icon'><span class='taap-center-helper'></span><img class='taap-logo' src='//images.trvl-media.com/media/content/expus/graphics/taap/taap-logo-white_40.png' alt=''></div><div class='alert-body'><div class='alert-message'>"+t.taapMessages.gbvRemainingMessagePlatinum+" <a href='/TAAP/IncentivePlan?rfrr=Header.Notif.TAAPGBVNextTier'>"+t.taapMessages.gbvRemainingLink+"</a></div></div></div>"):null,FLIGHTMIPACTIVITYELIGIBIITY:void 0!==t.lxmip?e.compile("<div class='alert-icon mip-lx'><img src='/static/default/default/images/crossSell/activity_bell.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.lxmip.lxFlightMIPActivityMsg+"<br><a href='/Activities' data-action='flightMIPActivity'>"+t.lxmip.lxFlightMIPActivityMsgCTC+"</a></div></div>"):null,FLIGHTMIPGTELIGIBIITY:void 0!==t.lxmip?e.compile("<div class='alert-icon'><img src='/static/default/default/images/crossSell/busBellImage.png' alt=''></div></div><div class='alert-body'><div class='alert-message'>"+t.lxmip.lxFlightMIPGTMsg+"<br><a href='/lx/groundTransfers' data-action='flightMIPGT'>"+t.lxmip.lxFlightMIPGTMsgCTC+"</a></div></div>"):null}})}(),function(){var e={};require("jquery",function(t){t("#user-alerts-menu").length>0&&t("#user-alerts-menu").attr("data-localized-content")&&(e=JSON.parse(t("#user-alerts-menu").attr("data-localized-content")),define("gc/alertmenu-strings",[],function(){return e}))})}(),function(){define("gc/alertmenu-view",["jquery","gc/pageModel","uitk"],function(e,t,i){return{state:{legacyMode:!1},$els:{headerBadge:null,menuWrapper:null,menuElement:null,scrollable:null},init:function(t){return this.controller=t,this.$els.menuWrapper=e("#user-alerts-menu"),this.$els.menuElement=this.$els.menuWrapper.find('[data-control="menu"]'),this.state.legacyMode=!(i&&i.version&&"v2"===i.version.split(".")[0]),this.becomeMenu(),this},reRender:function(){this.empty();var e="",t=this.controller.getAlerts(),i=0,a=this.controller.count();for(i;i<a;i++)e+=t[i].toDisplayString();return this.fill(e),this.updateBadge(a),this._bindNewAlertLinks(this.state.legacyMode),this._bindNewAlertCloseButtons(this.state.legacyMode),this},toggle:function(){return this.$els.menuWrapper.find(".menu").parent().hasClass("open")?this.close():this.open(),this},open:function(e){var t=this.state.legacyMode?"0.5em":"-171.5px";return this.$els.menuWrapper.find(".menu").css({right:t}).parent().addClass("open"),e?this.controller.sendeVar28("Header.Notif.MenuAuto"):this.controller.sendeVar28("Header.Notif.MenuOpen"),this},close:function(){var e=this.state.legacyMode?"0.5em":"-195.5px";return this.$els.menuWrapper.find(".menu").css({right:e}).parent().removeClass("open"),this.$els.menuWrapper.find(".bell-trigger-link").attr("aria-expanded","false"),this.$els.menuWrapper.focus(),this.controller.sendeVar28("Header.Notif.MenuClose"),this},empty:function(){return this.$els.scrollable.find(".alert-item:not(.default-alert-item)").remove(),this.$els.scrollable.find(".default-alert-item").show(),this},fill:function(t){var i=this.$els.scrollable.find(".default-alert-item"),a=0,r=this.controller.count(),n={};for(e(t).insertBefore(i),a;a<r;a++)n=this.controller.at(a),n.$el=e("#"+n.uniqueId);return this},becomeMenu:function(){var t=this;return this.state.legacyMode&&this.$els.menuWrapper.addClass("legacy"),e(".alerts-display-wrapper").show(),e(".alerts-display-wrapper").attr("aria-hidden","false"),this.$els.scrollable=this.$els.menuWrapper.find(".scrollable"),this.$els.headerBadge=this.$els.menuWrapper.find(".badge"),this.$els.headerBadge.click(function(i){i.preventDefault(),i.stopPropagation(),e(".shop-nav > li").removeClass("open"),t.toggle()}),this.$els.menuWrapper.addClass("visible"),this.$els.menuElement.click(function(){t.$els.menuElement.parent().hasClass("open")?t.controller.sendeVar28("Header.Notif.MenuClose"):t.controller.sendeVar28("Header.Notif.MenuOpen")}),this.updateBadge(this.controller.count()),e(".alerts-display-wrapper").show(),e(".alerts-display-wrapper").attr("aria-hidden","false"),this._bindNewAlertLinks(this.state.legacyMode),this},updateBadge:function(t){return t=t||this.controller.count(),t||0===t||(t=this.controller.count()),t>0?(this.$els.headerBadge.html(t).show(),1==t?e("#accessibleBadge").html(window.accessibleBadgeMessage).attr("aria-hidden","false"):e("#accessibleBadge").html(window.accessibleBadgeMessagePlural.replace("####",t)).attr("aria-hidden","false")):(this.$els.headerBadge.hide(),e("#accessibleBadge").html(window.accessibleBadgeMessagePlural.replace("####",t)).attr("aria-hidden","false")),this},_bindNewAlertLinks:function(i){var a=this;return"ANONYMOUS"!==t.user.userStatus&&(e(".spAccessibleButtonLink").attr("role","button"),e(".spAccessibleButtonLink").on("keypress",function(t){32===t.which&&(t.preventDefault(),e(this).trigger("click"))})),this.$els.menuWrapper.find(".alert-message a:not(.bound)").addClass("bound").click(function(t){var i=e(this),r=window.alertMenuClickHandlers[i.attr("data-action")],n=i.closest(".alert-item").attr("id"),s=a.controller.pluckAlertByUniqueId(n);a.controller.sendeVar28("Header.Notif.CTAClick"),e.isFunction(r)&&r(t,s),"false"!==i.attr("data-trigger-delete")&&(s.deleteSelf(!0),a.close().updateBadge(a.controller.count()))}),this},_bindNewAlertCloseButtons:function(t){var i=this;return this.$els.menuWrapper.find(".close-button button:not(.bound)").addClass("bound").click(function(t){t.preventDefault(),t.stopPropagation();var a=e(this).closest(".alert-item").attr("id"),r=i.controller.pluckAlertByUniqueId(a);i.controller.sendeVar28("Header.Notif.Dismiss."+r.raw.msgid),r.deleteSelf(!0),i.close().updateBadge(i.controller.count())}),this},_bindTempNewAlertButtons:function(t){var i=this;return this.$els.menuWrapper.find(".btn-close:not(.bound)").addClass("bound").click(function(t){t.preventDefault(),t.stopPropagation();var a=e(this).closest(".alert-item").attr("id"),r=i.controller.pluckAlertByUniqueId(a);i.controller.sendeVar28("Header.Notif.Dismiss."+r.raw.msgid),r.deleteSelf(!0),i.close().updateBadge(i.controller.count())}),this.$els.menuWrapper.find(".alert-message a:not(.bound)").addClass("bound").click(function(t){t.preventDefault(),t.stopPropagation();var a=e(this),r=window.alertMenuClickHandlers[a.attr("data-action")],n=a.closest(".alert-item").attr("id"),s=i.controller.pluckAlertByUniqueId(n);i.controller.sendeVar28("Header.Notif.SP"),e.isFunction(r)&&r(t,s),"false"!==a.attr("data-trigger-delete")&&(s.deleteSelf(!0),i.close().updateBadge(i.controller.count()))}),this}}})}(),function(){var e=50;define("gc/alertmenu",["jquery","uitk","gc/pageModel","env","gc/alertmenu-item-model","gc/alertmenu-view"],function(t,i,a,r,n,s){return{menuView:s,_alerts:[],_endpoints:{userAlertsService:"/news/v1",expwebDelete:"/api/userhistory/clearNews",scratchpadOptions:"/api/userhistory/options",sendMeNotes:"/sendmenotes",loginRedirect:"/user/login?ckoflag=0&hsuc=&fram=&uurl=qscr%3Dredr%26rurl%3D%2Fscratchpad%3FsendMeNotes%3Dtrue"},omLock:!0,queuedOmPixels:[],init:function(){var e=this;return this.menuView.init(this),this.enableListeners(),setTimeout(function(){e.omLock=!1,e.sendQueuedOmPixels()},1e3),this.fetchAndDisplayAlerts(!0),this.wotifCheck().detectIE11(),this},enableListeners:function(){var e=this;i.subscribe("alerts:empty",function(){e.getUserFlags()})},fetchAndDisplayAlerts:function(e){var t=this;this._getAlerts().then(function(a){t._unpackRawAlertData(a,e),0===t._alerts.length&&i.publish("alerts:empty"),t.menuView.reRender()}).fail(function(){i.publish("alerts:empty")})},getAlerts:function(){return this._alerts},count:function(){return this._alerts.length},at:function(e){return e=e||0,this._alerts[e]},removeDuplicateAlerts:function(e){var t={};return e.filter(function(e){var i=[e.raw.msgid,e.raw.params];return!t.hasOwnProperty(i)&&(t[i]=!0)})},wotifCheck:function(){return/wotif/.test(window.location.href)&&t(".alerts-display-wrapper").addClass("isWotif"),this},detectIE11:function(){return/Trident.*rv[ :]*11\./.test(navigator.userAgent)&&t(".alert-menu-wrapper").addClass("ie11"),this},getUserFlags:function(){var e=this;return this._request(this._endpoints.scratchpadOptions,"json").then(function(t){e.determineAdditionalUserMessagingFromOptions(t)}).fail(function(){})},determineAdditionalUserMessagingFromOptions:function(e){if(e&&"SUCCESS"==e.status&&e.scratchpadUserOptions){var t={},i=this.getLocalFlag("scratchpadDeclineNotesInTray"),n=this.getLocalFlag("scratchpadDeclineSaveInTray"),s="ANONYMOUS"==a.user.userStatus&&!n&&"en_US"!==r.locale,o="en_US"===r.locale&&e.scratchpadUserOptions.anyNews,l=!i&&"en_US"===r.locale&&!o&&!e.scratchpadUserOptions.sendNotes;if(l?t.promptType="notes":s?t.promptType="save":o&&(t.promptType="news"),t.promptType&&"default"!==t.promptType){var c={news:"spBasicNews",notes:"spNudgeEnroll",save:"spSignIn"}[t.promptType];this.addLateAlert({newsFeedType:"scratchpadLegacyAlert",msgid:c,params:[]})}else t.promptType}return this},addLateAlert:function(t){return 0===this.count()&&this._alerts.push(new n({newsFeedType:t.newsFeedType||"Bad type",_uid:t._uid||++e,msgid:t.msgid||"error",params:t.params||[]})),this.menuView.reRender(),this._alerts},pluckAlertByUniqueId:function(e){var t=0,i=this._alerts.length;for(t;t<i;t++)if(this._alerts[t].uniqueId===e)return this._alerts.splice(t,1)[0];return!1},sendeVar28:function(e){return this.omLock?this.queuedOmPixels.push(e):window.dctk&&dctk.onReady?dctk.onReady(function(){dctk.trackImpression("APE:"+e)}):window.s_exp&&window.s_exp.tl&&(s_exp.eVar28="APE:"+e,s_exp.linkTrackVars="eVar28,events",s_exp.linkTrackEvents="event80,event81",s_exp.tl(!0,"o","RFRR Action Link")),this},sendQueuedOmPixels:function(){for(var e=0;e<this.queuedOmPixels.length;e++)this.sendeVar28(this.queuedOmPixels[e]);return this.queuedOmPixels=[],this},setLocalFlag:function(e,t){try{if(window.localStorage)try{window.localStorage.setItem(e,t)}catch(i){return!1}}catch(i){return!1}return!0},getLocalFlag:function(e){var t=!1;try{if(window.localStorage)try{t=window.localStorage.getItem(e)}catch(i){return!1}}catch(i){return!1}return t},deleteSingle:function(e,t){return e&&(this.sendeVar28("Header.Notif.Delete."+e.raw.msgid),t&&this._remoteDelete(e),e=null),this},sendeVar28NoAPE:function(e){return window.dctk&&window.dctk.onReady&&dctk.onReady(function(){dctk.omtr.eVar28=e,dctk.omtr.events="event80",dctk.omtr.linkTrackVars="eVar28,events",dctk.omtr.linkTrackEvents="event80,event81",dctk.omtr.tl(!0,"o","RFRR Action Link")}),this},declineNudge:function(){return this.sendeVar28NoAPE("Scratchpad.NotesLater"),this.setLocalFlag("scratchpadDeclineNotesInTray",!0),this.sendNotes(!1)},declineSignInToSave:function(){return this.sendeVar28NoAPE("Scratchpad.SaveLater"),this.setLocalFlag("scratchpadDeclineSaveInTray",!0),this},enrollInNudge:function(){return this.sendNotes(!0)},sendNotes:function(e){var t=this;return this._request(this._endpoints.sendMeNotes,"json","POST",{sendMeNotes:e}).done(function(i){e&&!i&&(window.location.href=t._endpoints.loginRedirect)})},_getAlerts:function(){return this._request(this._buildAlertQuery(),this._getAlertQueryDataType())},_isLab:function(){return/trunk/.test(window.location.hostname)},_buildAlertQuery:function(){var e=(window.alertMenuRequestIds,a.user.tuid||-1),t=a.user.guid||-1,i=a.user.expUserId||-1,n=r.siteId;return this._endpoints.userAlertsService+"/expid/"+i+"/siteid/"+n+"/tuid/"+e+"/guid/"+t},_getAlertQueryDataType:function(){return"json"},_request:function(e,i,a,r){return t.ajax({url:e,type:a||"GET",dataType:i||"jsonp",data:r||{},timeout:5e3})},_unpackRawAlertData:function(e,t){if(!(e&&e.responsestatus&&e.responsestatus.status&&"SUCCESS"===e.responsestatus.status&&e.newsItems&&e.newsItems.length))return[];t&&(this._alerts=[]);var i,a=0,r=e.newsItems.length;for(a;a<r;a++)i=new n(e.newsItems[a]),"undefined"!=typeof i.contentString&&this._isNotRewardsAlert(i.contentString)&&this._alerts.push(i);return t||(this._alerts=this.removeDuplicateAlerts(this._alerts)),this._alerts},_isNotRewardsAlert:function(e){return!/TODO/.test(e)},_remoteDelete:function(e){return t.ajax({url:this._endpoints.expwebDelete,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({type:e.raw.type||"",msgid:e.raw.msgid||""})})}}}),define("gc/alertmenu-item-model",["jquery","gc/alertmenu-templates","gc/alertmenu-click-handlers"],function(t,i,a){var r=function(i){return this.raw=i,this.contentString=this._buildContentString(),this.uniqueId=[this.raw.msgid,++e].join(""),this.$el=t(this.toDisplayString()),this};return r.prototype={deleteSelf:function(e){return this.$el.remove(),"scratchpadLegacyAlert"===this.raw.newsFeedType?("spNudgeEnroll"==this.raw.msgid?AlertsMenu&&AlertsMenu.declineNudge():"spSignIn"==this.raw.msgid&&AlertsMenu&&AlertsMenu.declineSignInToSave(),AlertsMenu.deleteSingle(this,!1)):AlertsMenu.deleteSingle(this,e),null},toDisplayString:function(){var e="<li id="+this.uniqueId+' class="alert-item">'+this.contentString+'<div class="close-button"><button id="'+this.uniqueId+'-delete" btnType="close" targetId="'+this.uniqueId+'"><span class="icon icon-close" aria-hidden="true"></span><span class="visuallyhidden">'+accessibleNotifClose+"</span></button></div></li>";return e},_buildContentString:function(){return i[this.raw.msgid]?i[this.raw.msgid]({params:this.raw.params}):void 0}},r}),define("gc/alertmenu-click-handlers",["jquery","gc/pageModel","gc/alertmenu-strings"],function(e,t,i){window.alertMenuClickHandlers={spSignIn:function(e,t){window.AlertsMenu&&AlertsMenu.sendeVar28("Header.Notif.SP.SignIn")},spNudgeEnroll:function(a,r){a.preventDefault(),a.stopPropagation();var n=e(a.target).closest(".alert-item");n.find(".close-button").remove(),n.find(".alert-message").html(i.nudgeEnrollment.success),"ANONYMOUS"!==t.user.userStatus&&uitk.utils.liveAnnounce(i.nudgeEnrollment.success),uitk&&uitk.utils&&uitk.utils.focusElement&&uitk.utils.focusElement(n),window.AlertsMenu&&AlertsMenu.sendeVar28("Header.Notif.SP.OptIn"),window.AlertsMenu&&AlertsMenu.enrollInNudge()},spBasicNews:function(e,t){window.AlertsMenu&&AlertsMenu.sendeVar28("Header.Notif.SP.News")},spDetailedNews:function(e,t){window.AlertsMenu&&AlertsMenu.sendeVar28("Header.Notif.SP.LiveAlerts")},flightMIPGT:function(){window.AlertsMenu&&AlertsMenu.sendeVar28("Header.Notif.LX.Flight.GT")},flightMIPActivity:function(){window.AlertsMenu&&AlertsMenu.sendeVar28("Header.Notif.LX.Flight.Activity")},addChromeExtension:function(t,i){function a(){if(dctk&&dctk.loggingAdapter.logMessage("ChromeExtensionSuccessful"),localStorage){var t=new Date(e.now()),i=t.getUTCMonth()+1,a=t.getUTCDate(),r=t.getUTCFullYear(),n=t.getUTCHours(),s=t.getUTCMinutes(),o=t.getUTCSeconds(),l=r+"-"+i+"-"+a+" "+n+":"+s+":"+o;localStorage.setItem("chromeExtensionInstallCTA",l)}}function r(e){dctk&&dctk.loggingAdapter.logError("ChromeExtensionFailed",e)}window.AlertsMenu&&AlertsMenu.sendeVar28("HP.notbell"),chrome&&chrome.webstore.install("https://chrome.google.com/webstore/detail/cfbpcgmafclgfmpoelldpmiolgblgbel",a,r)}},window.accessibleBadgeMessage=i.a11y.badgeOne,window.accessibleBadgeMessagePlural=i.a11y.badgePlural,window.accessibleNotifClose=i.a11y.notifClose}),require("gc/alertmenu",function(e){window.AlertsMenu=e.init()})}(),define("gc/gemma-service",["jquery"],function(e){"use strict";function t(t){return e(t).find("Suggestion").map(function(){return this.innerHTML}).get()}function i(i,r){r=r||function(){};var n={prefix:i,clientid:a.clientid,count:a.count};e.ajax({dataType:a.dataType,timeout:a.timeout,url:a.url,data:n,error:function(e,t,i){var a=e.status;r("(gemma-service): "+a+" "+i,null)},success:function(e){null==e||""==e?r("(gemma-service): Gemma response is empty",null):r(null,t(e))}})}var a={dataType:"xml",timeout:6e3,url:"https://gemma.expedia.com/gemma/rest/suggest",clientid:"b73f2e66-c96a-4382-845b-30fa2d5ab102",count:"10"};return{getResponse:i}}),define("gc/gemma-typeahead",["jquery","gc/gemma-service"],function(e,t){"use strict";function i(e){var t=0,i=e||[];return i.map(function(e){return{index:t++,value:e}})}function a(e){e=e||function(){},r.autocomplete({minLength:n.minLength,delay:n.delay,focus:function(e){e.preventDefault()},source:function(e,a){t.getResponse(e.term,function(e,t){e||a(i(t))})},select:function(t,i){var a=i.item.value,n=(i.item.index,r.val());console.log("Gemma typeahead: selected (",a,") typed (",n,")"),e(0,a)}})}var r=e(".open-search-query"),n={minLength:3,delay:50};return t.getResponse("zzzz"),{init:a}}),require(["jquery","uitk","gc/gemma-typeahead","gc/abTest","gc/pageModel"],function(e,t,i,a,r){function n(){p.removeClass(k),w.removeClass(k);var t=e(window).width();l(t,!1),o(),i.init(c)}function s(e,t){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,t())}:i.onload=function(){t()},i.src=e,document.getElementsByTagName("head")[0].appendChild(i)}function o(){p.on("click",function(){m.addClass(C),g.removeClass(C),t.utils.focusElement(v)}),h.on("click",function(){g.addClass(C),m.removeClass(C)}),y.mousedown(function(){L=!0,c(e(window).width()>=x?A.desktop:A.mobile)}),v.keypress(function(t){13==t.which&&c(e(window).width()>=x?A.desktop:A.mobile)}),v.focusin(function(){v.addClass(S),f.addClass(S),y.show();var t=e(window).width();l(t,!0)}),v.focusout(function(){if(L)L=!1;else{y.hide(),v.removeClass(S),f.removeClass(S);var t=e(window).width();l(t,!1)}}),e(window).resize(function(){var t=e(window).width();v.blur(),l(t,!1)})}function l(e,t){if(e>=x){g.addClass(C);var i=e;e>P&&(i=P);var a=i-I;t&&(a=a-D-E),b.width(a)}}function c(i,a){var r=a||d(i),n=u(r);e(v).val(""),t.redirect(n)}function d(t){var i=v.map(function(t,i){return e(i).val()});return i[t]}function u(t){var i=_.params;i.q=t;var a=e.param(i);return _.url+"?"+a}var p=e(".open-search-icon-search"),h=e(".open-search-icon-close"),g=e(".open-search-search-bar-mobile"),m=e(".site-header-primary-banner"),f=e(".search-query-label"),v=e(".open-search-query"),y=e(".open-search-search-button"),w=e(".open-search-wrapper"),b=e(".open-search-search-bar-desktop").find(".search-query-wrapper"),k="hidden",C="visuallyhidden",S="open-search-bar-focus",A={desktop:0,mobile:1},T=e("#assetLinkPrefix").text(),_={url:"/search-results",params:{q:"",rfrr:"globalcontrols-header"}},P=1176,x=960,I=770,D=96,E=8,O="12087";y.hide();var N=a.get(O),M=!1,L=!1;switch(r.site.id){case 1:1033===r.site.langId&&(M=!0);break;case 3:2057===r.site.langId&&(M=!0)}if(N&&1===N.value&&M&&"function"==typeof window.turnOnHeaderOpenSearch){var R=T+"config/js/jquery-ui-1.11.4.js";s(R,function(){n()})}}),require(["uitk","jquery"],function(e,t){t(".skip-nav a[href^=#]").on("click",function(i){i.preventDefault();var a=i.currentTarget.getAttribute("href");e.utils.focusElement(t(a))})}),require(["gc/abTest"],function(e){var t=function(e,t){var i=$(".secondary-branding"),a=i.find("img"),r=a.attr("src");if(1==e.value){if(r){var n,s;11274==t?(n=r.replace(/images\/(.+)/g,"images/STOR-33847_Mobile2xHP_336x36.jpg"),s="/app?mcicid=USDouble"):11784==t&&(n=r.replace(/images\/(.+)/g,"images/aus_loyalty-campaign_240x32.gif"),s="/p/travel-rewards?mcicid=sbc_loyalty"),n&&s&&(a.attr("src",n),i.find("a").attr("href",s),a.on("load",function(e){$(this).removeClass("invisible")}))}}else a.removeClass("invisible")};e.get(11274,function(e){t(e,11274)},!1),e.get(11784,function(e){t(e,11784)},!1)}),define("gc/errorLogging",[],function(){var e=function(){return!(!window.dctk||!dctk.enabled)&&(dctk.logging&&dctk.logging.logError)},t=function(e){console&&(console.error?console.error(e):console.log&&console.log("Error occurred in Wizard: "+e))},i={logError:function(i,a,r,n,s){e()?dctk.logging.logError("globalcontrols",i,{control:a,module:r,method:n,comments:s}):(require("dctk/clientLogging",function(e){e.logError("globalcontrols",i,{control:a,module:r,method:n,comments:s})}),t(i))}};return i}),require(["uitk","gc/pageModel","jquery","gc/errorLogging"],function(e,t,i,a){try{if(t&&t.site&&1170===t.site.id&&t.user&&t.user.agent){var r=i("#hdr-packages").parent();i("#menu-bar ul:first").children().remove(),i("#menu-bar ul:first").append(r),i("ul.nav-secondary").remove()}}catch(n){a.logError(n,"wizard","gco-agent.js","main")}}),define("gc/abTestRegistryOverride",function(){"use strict";return[6070,6892,9016,8936,8937,8691,9257,9706,9415,9874,9875,9974]}),window.location.hostname.indexOf("travelocity")>-1)var channelTrackingAlreadyLoaded=!0;if("undefined"==typeof channelTrackingAlreadyLoaded){var channelTrackingAlreadyLoaded=!0,emptyAsppCookie="v.1,0|||||||||||||",SEO_SOURCES={"www.google.":[!0,null],"search.yahoo.com":[!0,null],"wrs.yahoo.com":[!0,null],"rc12.overture.com":[!0,!1],"bing.com/search":[!0,null],"terra.es":[!0,null],"ya.com":[!0,null],"ricerca.virgilio.it":[!0,null],"iltrovatore.it":[!0,null],"213.215.201.230":[!0,null],"orange.fr":[!0,null],"lycos.":[!0,null],"ask.com":[!0,null],"search.aol.":[!0,null],"askjeeves.":[!0,null],"myway.com":[!0,null],altavista:[!0,null],baidu:[!0,null],"daum.net":[!0,null],"mywebsearch.com":[!0,null],"naver.com":[!0,null],"suche.web.de":[!0,null],"mvirgilio.it":[!0,null],yandex:[!0,null]},CHANNEL_TYPES="(AFF|OLA|EML|MDP|SEM|OFF|MSN|ICM|SEO|AFM)";if("undefined"!=typeof qUnitTestRun&&null!=qUnitTestRun)var stub=sinon.stub(this,"getDomainLegacy",function(){return["://www.testDomain.com","www.","testDomain.com"]});ClearMediaCookieIfItIsTickSeparated();var tpid=GetP1CookieTpid(),eapid=GetCookieValue("iEAPID",0),ChannelType="",ChannelID="",ASPPersistentCookie="";GetASPPersistentCookie()>""&&isValidASPPCookie(GetASPPersistentCookie())||SetASPPersistentCookie("v.1,0|||||||||||||");var previousChannelID=GetCookieValue("aspp",1,"|"),previousChannelType=GetCookieValue("aspp",10,"|"),referrerAddress=document.referrer;if(""!=referrerAddress&&previousChannelID&&""!=previousChannelID&&"wpk"!=previousChannelID.slice(0,3).toLowerCase()&&(20==tpid||previousChannelType&&""!=previousChannelType&&"aff"!=previousChannelType.toLowerCase())){var clearSeocid=!1,clearCookie=!1;for(var site in SEO_SOURCES)referrerAddress.toLowerCase().indexOf(site)>-1&&(clearSeocid=SEO_SOURCES[site][0],clearCookie=null==SEO_SOURCES[site][1]?referrerAddress.toLowerCase().indexOf("semcid")==-1:SEO_SOURCES[site][1]);if(clearCookie&&SetASPPersistentCookie("v.1,0|||||||||||||"),clearSeocid){var urlAndQueryAttributes=window.location.toString().split("?");if(urlAndQueryAttributes.length>1){for(var url=urlAndQueryAttributes[0],queryAttributes=urlAndQueryAttributes[1].split("&"),relocate=!1,index=0;index<queryAttributes.length;index++)queryAttributes[index].toLowerCase().indexOf("seocid")==-1?(url+=0==index?"?":"&",url+=queryAttributes[index]):relocate=!0;1==relocate&&(window.location=url)}}}!function(){var e=new RegExp(CHANNEL_TYPES+"cid=([^&]*)","i"),t=e.exec(window.location.search);if(t||(t=e.exec(window.location.hash)),t||(t=e.exec(document.referrer)),t&&(ChannelType=t[1].toUpperCase(),ChannelID=escape(t[2]),""!==ChannelID&&(ASPPersistentCookie=GetASPPersistentCookie(),!ASPPersistentCookie>""&&(SetASPPersistentCookie(emptyAsppCookie),ASPPersistentCookie=GetASPPersistentCookie()),!IsLockedCode(previousChannelType,previousChannelID,ChannelType,ChannelID)))){var i=new Date((new Date).setTime((new Date).getTime()+2592e6)),a=i.getFullYear().toString(),r=(i.getMonth()+1).toString();r.length<2&&(r="0"+r);var n=i.getDate().toString();n.length<2&&(n="0"+n);var s=a+r+n,o=ASPPersistentCookie.split("|");o[1]=ChannelID,o[10]=ChannelType,o[11]=s,o[12]=GetChannelSpecificCode(ChannelID,o[12]),o[13]=getChannelSpecificConversionID(o[13]),ASPPersistentCookie="";for(var l=0;l<o.length;l++)ASPPersistentCookie+=o[l]+"|";ASPPersistentCookie=ASPPersistentCookie.substring(0,ASPPersistentCookie.length-1),checkIfEmailInString(ASPPersistentCookie)&&(ASPPersistentCookie=emptyAsppCookie),SetASPPersistentCookie(ASPPersistentCookie)}var c=getValueOfCookie("aspp");if(checkIfEmailInString(c)&&(c=emptyAsppCookie,SetASPPersistentCookie(c)),null!=c&&0!=c.length&&c.split("|").length>14){var d=c.substring(0,c.indexOf(c.split("|")[14])-1);SetASPPersistentCookie(d)}var u=["_tq_ref","mvthistory"];deleteCookie(u),window.location.search.search(/zanpid/i)>-1&&captureZanpid(window.location.search)}(),location.search.indexOf("cntrkrdebug")>-1&&window.console&&window.console.log&&console.log("Previous Channel Type: "+previousChannelType+"\n Previous Channel ID: "+previousChannelID+"\n Current Channel Type: "+ChannelType+"\n Current Channel ID: "+ChannelID+"\n ASPP Cookie Value: "+getCookie("aspp")+"\n ASPS Cookie Value: "+getCookie("asps"))}
//# sourceMappingURL=globalcontrols-min.js.map
